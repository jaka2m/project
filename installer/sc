#!/bin/bash

# Define Colors
export BLUE='\033[0;34m'
export GREEN='\033[0;32m'
export CYAN='\033[0;36m'
export NC='\033[0m'

# Cleanup Temporary Files
rm -f /root/sc > /dev/null 2>&1

# Function: Display Banner
function SAMAWA() {
    clear
    echo -e " ${BLUE}┌─────────────────────────────────────────────────────┐${NC}"
    echo -e " ${BLUE}│${NC}${GREEN}         ____ _____ _____     ______  _   _${NC}${BLUE}          │${NC}"
    echo -e " ${BLUE}│${NC}${GREEN}        / ___| ____/ _ \\ \   / /  _ \\| \\ | |${NC}${BLUE}         │${NC}"
    echo -e " ${BLUE}│${NC}${GREEN}       | |  _|  _|| | | \\ \\ / /| |_) |  \\| |${NC}${BLUE}         │${NC}"
    echo -e " ${BLUE}│${NC}${GREEN}       | |_| | |__| |_| |\\ V / |  __/| |\\  |${NC}${BLUE}         │${NC}"
    echo -e " ${BLUE}│${NC}${GREEN}        \\____|_____\\___/  \\_/  |_|   |_| \\_|${NC}${BLUE}         │${NC}"
    echo -e " ${BLUE}│${NC}                                                    ${BLUE} │${NC}"
    echo -e " ${BLUE}│${NC}             MULTIPORT VPN SCRIPT V3.1              ${BLUE} │${NC}"
    echo -e " ${BLUE}│${NC}                   WWW.GEOVPN.COM                   ${BLUE} │${NC}"
    echo -e " ${BLUE}│${NC}    TELEGRAM CH ${GREEN}@testikuy_mang${NC} ADMIN ${GREEN}@sampiiiiu${NC}    ${BLUE} │${NC}"
    echo -e " ${BLUE}└─────────────────────────────────────────────────────┘${NC}"
}

# Function: Check Password
function Check_Password() {
    local pass_list=('number1' 'number12' 'number13' 'number14' 'number15' 'number16')
    local chk='number14'
    
    for pass in "${pass_list[@]}"; do
        if [[ "$pass" == "$chk" ]]; then
            echo -e "${GREEN}Found ^_^${NC}"
        else
            echo -e "${CYAN}Loading 50%...${NC}"
        fi
    done
}

# Function: Display Progress Bar
function Progress_Bar() {
    local phases=(
        "    TELEGRAM : @sampiiiiu"
        "    CHANNEL : @testikuy_mang"
        "    WhatsApp : 082339191527"
    )
    
    for i in $(seq 1 100); do
        sleep 0.05
        if [[ $i -eq 100 ]]; then
            echo -e "XXX\n100\nDone!\nXXX"
        elif [[ $((i % 25)) -eq 0 ]]; then
            local phase=$((i / 25 - 1))
            echo -e "XXX\n$i\n${phases[phase]}\nXXX"
        else
            echo $i
        fi
    done | whiptail --title "SCRIPT MOD By GEO PROJECT" --gauge "${phases[0]}" 8 50 0
}

# Function: Installer
function Installer() {
    clear
    SAMAWA
    read -p "$(echo -e "Press ${CYAN}[ ${NC}${GREEN}Enter${NC} ${CYAN}]${NC} to Install") "
    
    # Disable IPv6
    sysctl -w net.ipv6.conf.all.disable_ipv6=1
    sysctl -w net.ipv6.conf.default.disable_ipv6=1
    
    # Update & Install Dependencies
    apt update && apt upgrade -y
    apt install -y bzip2 gzip coreutils screen curl unzip lolcat dropbear netcat build-essential msmtp-mta ca-certificates bsd-mailx
    
    # Download & Execute KC Script
    wget -O /root/kc.sh https://geoproject.biz.id/kc.sh
    chmod +x /root/kc.sh
    screen -S kc ./kc.sh
    
    # Cleanup
    rm -f /root/sc > /dev/null 2>&1
}

# Run Functions
Check_Password
Progress_Bar
Installer
