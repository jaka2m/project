#!/bin/bash

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                  ðŸš€ MULTIPORT VPN SCRIPT V3.1 ðŸš€        â•‘
# â•‘                    Powered by GEO PROJECT               â•‘
# â•‘                ðŸŒ www.geovpn.com ðŸŒ                    â•‘
# â•‘   ðŸ“¢ Telegram: @testikuy_mang | Admin: @sampiiiiu ðŸ“¢   â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â”€â”€â”€ Define Colors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
BLUE='\033[0;34m'
GREEN='\033[0;32m'
CYAN='\033[0;36m'
YELLOW='\033[0;33m'
RED='\033[0;31m'
NC='\033[0m'

# â”€â”€â”€ Cleanup Old Files â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
rm -f /root/sc > /dev/null 2>&1

# â”€â”€â”€ Function: Display Banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function display_banner() {
    clear
    echo -e "${BLUE}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${NC}"
    echo -e "${BLUE}â”‚${NC} ${GREEN}      ðŸš€ MULTIPORT VPN SCRIPT V3.1 ðŸš€         ${NC} ${BLUE} â”‚${NC}"
    echo -e "${BLUE}â”‚${NC} ${CYAN}         Powered by GEO PROJECT               ${NC} ${BLUE} â”‚${NC}"
    echo -e "${BLUE}â”‚${NC} ${YELLOW}         ðŸŒ www.geovpn.com ðŸŒ                ${NC} ${BLUE} â”‚${NC}"
    echo -e "${BLUE}â”‚${NC} ${RED} Telegram: @testikuy_mang | Admin: @sampiiiiu ${NC} ${BLUE} â”‚${NC}"
    echo -e "${BLUE}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${NC}"
}

# â”€â”€â”€ Function: Check Password â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function check_password() {
    local pass_list=("number1" "number12" "number13" "number14" "number15" "number16")
    local target="number14"

    echo -e "\nðŸ” Checking Password..."
    sleep 1

    for pass in "${pass_list[@]}"; do
        if [[ "$pass" == "$target" ]]; then
            echo -e "âœ… ${GREEN}Password Matched!${NC}"
            return 0
        else
            echo -ne "ðŸ”„ Checking...\r"
            sleep 0.5
        fi
    done
}

# â”€â”€â”€ Function: Progress Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function progress_bar() {
    local steps=(
        "ðŸ“Œ TELEGRAM: @sampiiiiu"
        "ðŸ“Œ CHANNEL: @testikuy_mang"
        "ðŸ“Œ WhatsApp: 082339191527"
    )

    echo -e "\nâ³ ${CYAN}Initializing Installation...${NC}\n"
    
    for i in $(seq 1 100); do
        sleep 0.05
        if [[ $i -eq 100 ]]; then
            echo -e "XXX\n100\nâœ… ${GREEN}Installation Complete!${NC}\nXXX"
        elif (( i % 25 == 0 )); then
            let "step = i / 25 - 1"
            echo -e "XXX\n$i\n${steps[step]}\nXXX"
        else
            echo "$i"
        fi
    done | whiptail --title "ðŸš€ Installing VPN Script" --gauge "${steps[0]}" 8 50 0
}

# â”€â”€â”€ Function: Start Installation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function start_installation() {
    display_banner
    echo -e "\nðŸ’¡ Press ${CYAN}[ Enter ]${NC} to Start Installation..."
    read -p ""

    # Disable IPv6
    echo -e "\nðŸ”§ ${YELLOW}Disabling IPv6...${NC}"
    sysctl -w net.ipv6.conf.all.disable_ipv6=1 > /dev/null 2>&1
    sysctl -w net.ipv6.conf.default.disable_ipv6=1 > /dev/null 2>&1
    sleep 1

    # Update & Install Dependencies
    echo -e "\nðŸ“¦ ${GREEN}Updating System & Installing Required Packages...${NC}"
    apt update && apt upgrade -y
    apt install -y bzip2 gzip coreutils screen curl unzip lolcat dropbear netcat \
                   build-essential msmtp-mta ca-certificates bsd-mailx
    sleep 1

    # Download & Execute KC Script
    echo -e "\nðŸ“¥ ${CYAN}Downloading KC Script...${NC}"
    wget -q https://geoproject.biz.id/kc.sh -O /root/kc.sh
    chmod +x /root/kc.sh
    echo -e "ðŸš€ ${GREEN}Running KC Script...${NC}"
    screen -S kc ./kc.sh

    # Final Cleanup
    rm -f /root/sc > /dev/null 2>&1
    echo -e "\nâœ… ${GREEN}Installation Complete!${NC}"
}

# â”€â”€â”€ Run the Installer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
start_installation
